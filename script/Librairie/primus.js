!function(t,e,r,n){e[t]=r.call(e);for(var o=0;o<n.length;o++)n[o](e[t]);"undefined"!=typeof module&&module.exports?module.exports=e[t]:"function"==typeof define&&define.amd&&define(function(){return e[t]})}("Primus",this||{},function(){return function(){return function t(e,r,n){function o(s,a){var c,u,p;if(!r[s]){if(!e[s]){if(c="function"==typeof require&&require,!a&&c)return c(s,!0);if(i)return i(s,!0);throw(u=new Error("Cannot find module '"+s+"'")).code="MODULE_NOT_FOUND",u}p=r[s]={exports:{}},e[s][0].call(p.exports,function(t){return o(e[s][1][t]||t)},p,p.exports,t,e,r,n)}return r[s].exports}for(var i="function"==typeof require&&require,s=0;s<n.length;s++)o(n[s]);return o}}()({1:[function(t,e,r){"use strict";e.exports=function(t,e){var r=/[, ]+/;function n(t,n){if(e[t]){if("string"==typeof e[t]&&(e[t]=e[t].split(r)),"function"==typeof e[t])return e[t].call(n);for(var o,i,s=0;s<e[t].length;s++)"function"===(o=typeof(i=e[t][s]))?i.call(n):"string"===o&&"function"==typeof n[i]&&n[i]()}}return e=e||{},"string"==typeof(t=t||[])&&(t=t.split(r)),function(){var e,r=0;if(null===this[t[0]])return!1;for(n("before",this);r<t.length;r++)this[e=t[r]]&&("function"==typeof this[e].destroy&&this[e].destroy(),this[e]=null);return this.emit&&this.emit("destroy"),n("after",this),!0}}},{}],2:[function(t,e,r){"use strict";e.exports=function(){var t,e,r,n,o=this;for(e=0,r=arguments.length,n=new Array(r);e<r;e++)n[e]=arguments[e];return"function"!=typeof n[n.length-1]?function(){for(var t=0,e=arguments.length,r=new Array(e);t<e;t++)r[t]=arguments[t];return o.emit.apply(o,n.concat(r))}:(t=n.pop(),function(){for(var e=0,r=arguments.length,i=new Array(r+1);e<r;e++)i[e+1]=arguments[e];return i[0]=function(t,e){if(t)return o.emit("error",t);i=void 0===e?i.slice(1):null===e?[]:e,o.emit.apply(o,n.concat(i))},t.apply(o,i),!0})}},{}],3:[function(t,e,r){"use strict";var n=Object.prototype.hasOwnProperty,o="~";function i(){}function s(t,e,r,n,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var s=new function(t,e,r){this.fn=t,this.context=e,this.once=r||!1}(r,n||t,i),a=o?o+e:e;return t._events[a]?t._events[a].fn?t._events[a]=[t._events[a],s]:t._events[a].push(s):(t._events[a]=s,t._eventsCount++),t}function a(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function c(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(o=!1)),c.prototype.eventNames=function(){var t,e,r=[];if(0===this._eventsCount)return r;for(e in t=this._events)n.call(t,e)&&r.push(o?e.slice(1):e);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},c.prototype.listeners=function(t){var e,r,n,i=o?o+t:t,s=this._events[i];if(!s)return[];if(s.fn)return[s.fn];for(e=0,r=s.length,n=new Array(r);e<r;e++)n[e]=s[e].fn;return n},c.prototype.listenerCount=function(t){var e=o?o+t:t,r=this._events[e];return r?r.fn?1:r.length:0},c.prototype.emit=function(t,e,r,n,i,s){var a,c,u,p,h,f,l=o?o+t:t;if(!this._events[l])return!1;if(a=this._events[l],c=arguments.length,a.fn){switch(a.once&&this.removeListener(t,a.fn,void 0,!0),c){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,e),!0;case 3:return a.fn.call(a.context,e,r),!0;case 4:return a.fn.call(a.context,e,r,n),!0;case 5:return a.fn.call(a.context,e,r,n,i),!0;case 6:return a.fn.call(a.context,e,r,n,i,s),!0}for(p=1,u=new Array(c-1);p<c;p++)u[p-1]=arguments[p];a.fn.apply(a.context,u)}else for(h=a.length,p=0;p<h;p++)switch(a[p].once&&this.removeListener(t,a[p].fn,void 0,!0),c){case 1:a[p].fn.call(a[p].context);break;case 2:a[p].fn.call(a[p].context,e);break;case 3:a[p].fn.call(a[p].context,e,r);break;case 4:a[p].fn.call(a[p].context,e,r,n);break;default:if(!u)for(f=1,u=new Array(c-1);f<c;f++)u[f-1]=arguments[f];a[p].fn.apply(a[p].context,u)}return!0},c.prototype.on=function(t,e,r){return s(this,t,e,r,!1)},c.prototype.once=function(t,e,r){return s(this,t,e,r,!0)},c.prototype.removeListener=function(t,e,r,n){var i,s,c,u,p=o?o+t:t;if(!this._events[p])return this;if(!e)return a(this,p),this;if((i=this._events[p]).fn)i.fn!==e||n&&!i.once||r&&i.context!==r||a(this,p);else{for(s=0,c=[],u=i.length;s<u;s++)(i[s].fn!==e||n&&!i[s].once||r&&i[s].context!==r)&&c.push(i[s]);c.length?this._events[p]=1===c.length?c[0]:c:a(this,p)}return this},c.prototype.removeAllListeners=function(t){var e;return t?(e=o?o+t:t,this._events[e]&&a(this,e)):(this._events=new i,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=o,c.EventEmitter=c,void 0!==e&&(e.exports=c)},{}],4:[function(t,e,r){"function"==typeof Object.create?e.exports=function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(t,e){t.super_=e;var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],5:[function(t,e,r){"use strict";var n=new RegExp("^((?:\\d+)?\\.?\\d+) *("+["milliseconds?","msecs?","ms","seconds?","secs?","s","minutes?","mins?","m","hours?","hrs?","h","days?","d","weeks?","wks?","w","years?","yrs?","y"].join("|")+")?$","i"),o=1e3,i=60*o,s=60*i,a=24*s,c=7*a,u=365*a;e.exports=function(t){var e,r,p=typeof t;if("number"===p)return t;if("string"!==p||"0"===t||!t)return 0;if(+t)return+t;if(t.length>1e4||!(r=n.exec(t)))return 0;switch(e=parseFloat(r[1]),r[2].toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return e*u;case"weeks":case"week":case"wks":case"wk":case"w":return e*c;case"days":case"day":case"d":return e*a;case"hours":case"hour":case"hrs":case"hr":case"h":return e*s;case"minutes":case"minute":case"mins":case"min":case"m":return e*i;case"seconds":case"second":case"secs":case"sec":case"s":return e*o;default:return e}}},{}],6:[function(t,e,r){"use strict";e.exports=function(t){var e,r=0;function n(){return r?e:(r=1,e=t.apply(this,arguments),t=null,e)}return n.displayName=t.displayName||t.name||n.displayName||n.name,n}},{}],7:[function(t,e,r){"use strict";var n=Object.prototype.hasOwnProperty;function o(t){return decodeURIComponent(t.replace(/\+/g," "))}r.stringify=function(t,e){var r,o;for(o in r=[],"string"!=typeof(e=e||"")&&(e="?"),t)n.call(t,o)&&r.push(encodeURIComponent(o)+"="+encodeURIComponent(t[o]));return r.length?e+r.join("&"):""},r.parse=function(t){for(var e,r,n,i=/([^=?&]+)=?([^&]*)/g,s={};e=i.exec(t);)r=o(e[1]),n=o(e[2]),r in s||(s[r]=n);return s}},{}],8:[function(t,e,r){"use strict";var n=t("eventemitter3"),o=t("millisecond"),i=t("demolish"),s=t("tick-tock"),a=t("one-time");function c(t,e,r){return o(t in r?r[t]:t in e?e[t]:u[t])}function u(t){if(!(this instanceof u))return new u(t);t=t||{},this.attempt=null,this._fn=null,this["reconnect timeout"]=c("reconnect timeout",this,t),this.retries=c("retries",this,t),this.factor=c("factor",this,t),this.max=c("max",this,t),this.min=c("min",this,t),this.timers=new s(this)}u.prototype=new n,u.prototype.constructor=u,u["reconnect timeout"]="30 seconds",u.max=1/0,u.min="500 ms",u.retries=10,u.factor=2,u.prototype.reconnect=function(){var t=this;return t.backoff(function(e,r){if(r.duration=+new Date-r.start,e)return t.emit("reconnect failed",e,r);t.emit("reconnected",r)},t.attempt)},u.prototype.backoff=function(t,e){var r=this;return(e=e||r.attempt||{}).backoff?r:(e["reconnect timeout"]=c("reconnect timeout",r,e),e.retries=c("retries",r,e),e.factor=c("factor",r,e),e.max=c("max",r,e),e.min=c("min",r,e),e.start=+e.start||+new Date,e.duration=+e.duration||0,e.attempt=+e.attempt||0,e.attempt===e.retries?(t.call(r,new Error("Unable to recover"),e),r):(e.backoff=!0,e.attempt++,r.attempt=e,e.scheduled=1!==e.attempt?Math.min(Math.round((Math.random()+1)*e.min*Math.pow(e.factor,e.attempt-1)),e.max):e.min,r.timers.setTimeout("reconnect",function(){e.duration=+new Date-e.start,e.backoff=!1,r.timers.clear("reconnect, timeout");var n=r._fn=a(function(n){if(r.reset(),n)return r.backoff(t,e);t.call(r,void 0,e)});r.emit("reconnect",e,n),r.timers.setTimeout("timeout",function(){var t=new Error("Failed to reconnect in a timely manner");e.duration=+new Date-e.start,r.emit("reconnect timeout",t,e),n(t)},e["reconnect timeout"])},e.scheduled),r.emit("reconnect scheduled",e),r))},u.prototype.reconnecting=function(){return!!this.attempt},u.prototype.reconnected=function(t){return this._fn&&this._fn(t),this},u.prototype.reset=function(){return this._fn=this.attempt=null,this.timers.clear("reconnect, timeout"),this},u.prototype.destroy=i("timers attempt _fn"),e.exports=u},{demolish:1,eventemitter3:9,millisecond:5,"one-time":6,"tick-tock":11}],9:[function(t,e,r){"use strict";var n="function"!=typeof Object.create&&"~";function o(t,e,r){this.fn=t,this.context=e,this.once=r||!1}function i(){}i.prototype._events=void 0,i.prototype.listeners=function(t,e){var r,o,i,s=n?n+t:t,a=this._events&&this._events[s];if(e)return!!a;if(!a)return[];if(a.fn)return[a.fn];for(r=0,o=a.length,i=new Array(o);r<o;r++)i[r]=a[r].fn;return i},i.prototype.emit=function(t,e,r,o,i,s){var a,c,u,p,h,f,l=n?n+t:t;if(!this._events||!this._events[l])return!1;if(a=this._events[l],c=arguments.length,"function"==typeof a.fn){switch(a.once&&this.removeListener(t,a.fn,void 0,!0),c){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,e),!0;case 3:return a.fn.call(a.context,e,r),!0;case 4:return a.fn.call(a.context,e,r,o),!0;case 5:return a.fn.call(a.context,e,r,o,i),!0;case 6:return a.fn.call(a.context,e,r,o,i,s),!0}for(p=1,u=new Array(c-1);p<c;p++)u[p-1]=arguments[p];a.fn.apply(a.context,u)}else for(h=a.length,p=0;p<h;p++)switch(a[p].once&&this.removeListener(t,a[p].fn,void 0,!0),c){case 1:a[p].fn.call(a[p].context);break;case 2:a[p].fn.call(a[p].context,e);break;case 3:a[p].fn.call(a[p].context,e,r);break;default:if(!u)for(f=1,u=new Array(c-1);f<c;f++)u[f-1]=arguments[f];a[p].fn.apply(a[p].context,u)}return!0},i.prototype.on=function(t,e,r){var i=new o(e,r||this),s=n?n+t:t;return this._events||(this._events=n?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],i]:this._events[s].push(i):this._events[s]=i,this},i.prototype.once=function(t,e,r){var i=new o(e,r||this,!0),s=n?n+t:t;return this._events||(this._events=n?{}:Object.create(null)),this._events[s]?this._events[s].fn?this._events[s]=[this._events[s],i]:this._events[s].push(i):this._events[s]=i,this},i.prototype.removeListener=function(t,e,r,o){var i,s,a,c,u=n?n+t:t;if(!this._events||!this._events[u])return this;if(i=this._events[u],s=[],e)if(i.fn)(i.fn!==e||o&&!i.once||r&&i.context!==r)&&s.push(i);else for(a=0,c=i.length;a<c;a++)(i[a].fn!==e||o&&!i[a].once||r&&i[a].context!==r)&&s.push(i[a]);return s.length?this._events[u]=1===s.length?s[0]:s:delete this._events[u],this},i.prototype.removeAllListeners=function(t){return this._events?(t?delete this._events[n?n+t:t]:this._events=n?{}:Object.create(null),this):this},i.prototype.off=i.prototype.removeListener,i.prototype.addListener=i.prototype.on,i.prototype.setMaxListeners=function(){return this},i.prefixed=n,void 0!==e&&(e.exports=i)},{}],10:[function(t,e,r){"use strict";e.exports=function(t,e){if(e=e.split(":")[0],!(t=+t))return!1;switch(e){case"http":case"ws":return 80!==t;case"https":case"wss":return 443!==t;case"ftp":return 21!==t;case"gopher":return 70!==t;case"file":return!1}return 0!==t}},{}],11:[function(t,e,r){"use strict";var n=Object.prototype.hasOwnProperty,o=t("millisecond");function i(t,e,r,n){this.start=+new Date,this.duration=r,this.clear=e,this.timer=t,this.fns=[n]}function s(t){clearTimeout(t)}function a(t){clearInterval(t)}function c(t){clearImmediate(t)}function u(t){if(!(this instanceof u))return new u(t);this.timers={},this.context=t||this}i.prototype.remaining=function(){return this.duration-this.taken()},i.prototype.taken=function(){return+new Date-this.start},u.prototype.tock=function(t,e){var r=this;return function(){if(t in r.timers){var n=r.timers[t].fns.slice(),o=n.length,i=0;for(e?r.clear(t):r.start=+new Date;i<o;i++)n[i].call(r.context)}}},u.prototype.setTimeout=function(t,e,r){var n;return this.timers[t]?(this.timers[t].fns.push(e),this):(n=o(r),this.timers[t]=new i(setTimeout(this.tock(t,!0),o(r)),s,n,e),this)},u.prototype.setInterval=function(t,e,r){var n;return this.timers[t]?(this.timers[t].fns.push(e),this):(n=o(r),this.timers[t]=new i(setInterval(this.tock(t),o(r)),a,n,e),this)},u.prototype.setImmediate=function(t,e){return"function"!=typeof setImmediate?this.setTimeout(t,e,0):this.timers[t]?(this.timers[t].fns.push(e),this):(this.timers[t]=new i(setImmediate(this.tock(t,!0)),c,0,e),this)},u.prototype.active=function(t){return t in this.timers},u.prototype.clear=function(){var t,e,r,o=arguments.length?arguments:[];if(1===o.length&&"string"==typeof o[0]&&(o=o[0].split(/[, ]+/)),!o.length)for(t in this.timers)n.call(this.timers,t)&&o.push(t);for(e=0,r=o.length;e<r;e++)(t=this.timers[o[e]])&&(t.clear(t.timer),t.fns=t.timer=t.clear=null,delete this.timers[o[e]]);return this},u.prototype.adjust=function(t,e){var r,n=o(e),i=this.timers[t];return i?(r=i.clear===a,i.clear(i.timer),i.start=+new Date,i.duration=n,i.timer=(r?setInterval:setTimeout)(this.tock(t,!r),n),this):this},u.prototype.end=u.prototype.destroy=function(){return!!this.context&&(this.clear(),this.context=this.timers=null,!0)},u.Timer=i,e.exports=u},{millisecond:5}],12:[function(t,e,r){(function(r){"use strict";var n=t("requires-port"),o=t("querystringify"),i=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,s=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,a=[["#","hash"],["?","query"],["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],c={hash:1,query:1};function u(t){var e,n={},o=typeof(t=t||r.location||{});if("blob:"===t.protocol)n=new h(unescape(t.pathname),{});else if("string"===o)for(e in n=new h(t,{}),c)delete n[e];else if("object"===o){for(e in t)e in c||(n[e]=t[e]);void 0===n.slashes&&(n.slashes=s.test(t.href))}return n}function p(t){var e=i.exec(t);return{protocol:e[1]?e[1].toLowerCase():"",slashes:!!e[2],rest:e[3]}}function h(t,e,r){if(!(this instanceof h))return new h(t,e,r);var i,s,c,f,l,d,y=a.slice(),m=typeof e,g=this,v=0;for("object"!==m&&"string"!==m&&(r=e,e=null),r&&"function"!=typeof r&&(r=o.parse),e=u(e),i=!(s=p(t||"")).protocol&&!s.slashes,g.slashes=s.slashes||i&&e.slashes,g.protocol=s.protocol||e.protocol||"",t=s.rest,s.slashes||(y[2]=[/(.*)/,"pathname"]);v<y.length;v++)c=(f=y[v])[0],d=f[1],c!=c?g[d]=t:"string"==typeof c?~(l=t.indexOf(c))&&("number"==typeof f[2]?(g[d]=t.slice(0,l),t=t.slice(l+f[2])):(g[d]=t.slice(l),t=t.slice(0,l))):(l=c.exec(t))&&(g[d]=l[1],t=t.slice(0,l.index)),g[d]=g[d]||i&&f[3]&&e[d]||"",f[4]&&(g[d]=g[d].toLowerCase());r&&(g.query=r(g.query)),i&&e.slashes&&"/"!==g.pathname.charAt(0)&&(""!==g.pathname||""!==e.pathname)&&(g.pathname=function(t,e){for(var r=(e||"/").split("/").slice(0,-1).concat(t.split("/")),n=r.length,o=r[n-1],i=!1,s=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),s++):s&&(0===n&&(i=!0),r.splice(n,1),s--);return i&&r.unshift(""),"."!==o&&".."!==o||r.push(""),r.join("/")}(g.pathname,e.pathname)),n(g.port,g.protocol)||(g.host=g.hostname,g.port=""),g.username=g.password="",g.auth&&(f=g.auth.split(":"),g.username=f[0]||"",g.password=f[1]||""),g.origin=g.protocol&&g.host&&"file:"!==g.protocol?g.protocol+"//"+g.host:"null",g.href=g.toString()}h.prototype={set:function(t,e,r){var i,s,c,u=this;switch(t){case"query":"string"==typeof e&&e.length&&(e=(r||o.parse)(e)),u[t]=e;break;case"port":u[t]=e,n(e,u.protocol)?e&&(u.host=u.hostname+":"+e):(u.host=u.hostname,u[t]="");break;case"hostname":u[t]=e,u.port&&(e+=":"+u.port),u.host=e;break;case"host":u[t]=e,/:\d+$/.test(e)?(e=e.split(":"),u.port=e.pop(),u.hostname=e.join(":")):(u.hostname=e,u.port="");break;case"protocol":u.protocol=e.toLowerCase(),u.slashes=!r;break;case"pathname":case"hash":e?(i="pathname"===t?"/":"#",u[t]=e.charAt(0)!==i?i+e:e):u[t]=e;break;default:u[t]=e}for(s=0;s<a.length;s++)(c=a[s])[4]&&(u[c[1]]=u[c[1]].toLowerCase());return u.origin=u.protocol&&u.host&&"file:"!==u.protocol?u.protocol+"//"+u.host:"null",u.href=u.toString(),u},toString:function(t){var e,r,n,i;return t&&"function"==typeof t||(t=o.stringify),(n=(r=this).protocol)&&":"!==n.charAt(n.length-1)&&(n+=":"),i=n+(r.slashes?"//":""),r.username&&(i+=r.username,r.password&&(i+=":"+r.password),i+="@"),i+=r.host+r.pathname,(e="object"==typeof r.query?t(r.query):r.query)&&(i+="?"!==e.charAt(0)?"?"+e:e),r.hash&&(i+=r.hash),i}},h.extractProtocol=p,h.location=u,h.qs=o,e.exports=h}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{querystringify:7,"requires-port":10}],13:[function(t,e,r){"use strict";var n,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i=64,s={},a=0,c=0;function u(t){var e="";do{e=o[t%i]+e,t=Math.floor(t/i)}while(t>0);return e}function p(){var t=u(+new Date);return t!==n?(a=0,n=t):t+"."+u(a++)}for(;c<i;c++)s[o[c]]=c;p.encode=u,p.decode=function(t){var e=0;for(c=0;c<t.length;c++)e=e*i+s[t.charAt(c)];return e},e.exports=p},{}],14:[function(t,e,r){"use strict";var n,o,i,s,a=t("eventemitter3"),c=t("tick-tock"),u=t("recovery"),p=t("querystringify"),h=t("inherits"),f=t("demolish"),l=t("yeast"),d=/\u2028/g,y=/\u2029/g;function m(t,e){if(!(t instanceof g)){var r=new Error("Primus#"+e+"'s context should called with a Primus instance");if("function"!=typeof t.listeners||!t.listeners("error").length)throw r;t.emit("error",r)}}try{n=location.origin?location.origin:location.protocol+"//"+location.host}catch(t){n="http://127.0.0.1"}function g(t,e){if(!(this instanceof g))return new g(t,e);if(g.Stream.call(this),"function"!=typeof this.client)return this.critical(new Error("The client library has not been compiled correctly, see https://github.com/primus/primus#client-library for more details"));if("object"==typeof t?t=(e=t).url||e.uri||n:e=e||{},"ping"in e||"pong"in e)return this.critical(new Error("The `ping` and `pong` options have been removed"));var r=this;e.queueSize="queueSize"in e?e.queueSize:1/0,e.timeout="timeout"in e?e.timeout:1e4,e.reconnect="reconnect"in e?e.reconnect:{},e.pingTimeout="pingTimeout"in e?e.pingTimeout:45e3,e.strategy="strategy"in e?e.strategy:[],e.transport="transport"in e?e.transport:{},r.buffer=[],r.writable=!0,r.readable=!0,r.url=r.parse(t||n),r.readyState=g.CLOSED,r.options=e,r.timers=new c(this),r.socket=null,r.disconnect=!1,r.transport=e.transport,r.transformers={outgoing:[],incoming:[]},r.recovery=new u(e.reconnect),"string"==typeof e.strategy&&(e.strategy=e.strategy.split(/\s?,\s?/g)),!1===e.strategy?e.strategy=[]:e.strategy.length||(e.strategy.push("disconnect","online"),this.authorization||e.strategy.push("timeout")),e.strategy=e.strategy.join(",").toLowerCase(),"websockets"in e&&(r.AVOID_WEBSOCKETS=!e.websockets),"network"in e&&(r.NETWORK_EVENTS=e.network),e.manual||r.timers.setTimeout("open",function(){r.timers.clear("open"),r.open()},0),r.initialise(e)}g.requires=g.require=function(e){if("function"==typeof t)return t(e)};try{g.Stream=g.requires("stream")}catch(t){}g.Stream||(g.Stream=a),h(g,g.Stream),g.OPENING=1,g.CLOSED=2,g.OPEN=3,g.prototype.AVOID_WEBSOCKETS=!1,g.prototype.NETWORK_EVENTS=!1,g.prototype.online=!0;try{(g.prototype.NETWORK_EVENTS="onLine"in navigator&&(window.addEventListener||document.body.attachEvent))&&(navigator.onLine||(g.prototype.online=!1))}catch(t){}g.prototype.ark={},g.prototype.emits=t("emits"),g.prototype.plugin=function(t){if(m(this,"plugin"),t)return this.ark[t];var e={};for(t in this.ark)e[t]=this.ark[t];return e},g.prototype.reserved=function(t){return/^(incoming|outgoing)::/.test(t)||t in this.reserved.events},g.prototype.reserved.events={"reconnect scheduled":1,"reconnect timeout":1,readyStateChange:1,"reconnect failed":1,reconnected:1,reconnect:1,offline:1,timeout:1,destroy:1,online:1,error:1,close:1,open:1,data:1,end:1},g.prototype.initialise=function(t){var e,r=this;for(e in r.recovery.on("reconnected",r.emits("reconnected")).on("reconnect failed",r.emits("reconnect failed",function(t){r.emit("end"),t()})).on("reconnect timeout",r.emits("reconnect timeout")).on("reconnect scheduled",r.emits("reconnect scheduled")).on("reconnect",r.emits("reconnect",function(t){r.emit("outgoing::reconnect"),t()})),r.on("outgoing::open",function(){var t=r.readyState;r.readyState=g.OPENING,t!==r.readyState&&r.emit("readyStateChange","opening")}),r.on("incoming::open",function(){var t,e,n,o=r.readyState;if(r.recovery.reconnecting()&&r.recovery.reconnected(),r.writable=!0,r.readable=!0,r.online||(r.online=!0,r.emit("online")),r.readyState=g.OPEN,o!==r.readyState&&r.emit("readyStateChange","open"),r.heartbeat(),r.buffer.length)for(e=(t=r.buffer.slice()).length,n=0,r.buffer.length=0;n<e;n++)r._write(t[n]);r.emit("open")}),r.on("incoming::ping",function(t){r.online=!0,r.heartbeat(),r.emit("outgoing::pong",t),r._write("primus::pong::"+t)}),r.on("incoming::error",function(t){var e,n=r.timers.active("connect"),o=t;if("string"==typeof t)o=new Error(t);else if(!(t instanceof Error)&&"object"==typeof t)for(e in o=new Error(t.message||t.reason),t)Object.prototype.hasOwnProperty.call(t,e)&&(o[e]=t[e]);if(r.recovery.reconnecting())return r.recovery.reconnected(o);r.listeners("error").length&&r.emit("error",o),n&&(~r.options.strategy.indexOf("timeout")?r.recovery.reconnect():r.end())}),r.on("incoming::data",function(t){r.decoder(t,function(e,n){if(e)return r.listeners("error").length&&r.emit("error",e);r.protocol(n)||r.transforms(r,r,"incoming",n,t)})}),r.on("incoming::end",function(){var t=r.readyState;return r.disconnect?(r.disconnect=!1,r.end()):(r.readyState=g.CLOSED,t!==r.readyState&&r.emit("readyStateChange","end"),r.timers.active("connect")&&r.end(),t!==g.OPEN?!!r.recovery.reconnecting()&&r.recovery.reconnect():(this.writable=!1,this.readable=!1,this.timers.clear(),r.emit("close"),~r.options.strategy.indexOf("disconnect")?r.recovery.reconnect():(r.emit("outgoing::end"),void r.emit("end"))))}),r.client(),r.ark)r.ark[e].call(r,r,t);return r.NETWORK_EVENTS?(r.offlineHandler=function(){r.online&&(r.online=!1,r.emit("offline"),r.end(),r.recovery.reset())},r.onlineHandler=function(){r.online||(r.online=!0,r.emit("online"),~r.options.strategy.indexOf("online")&&r.recovery.reconnect())},window.addEventListener?(window.addEventListener("offline",r.offlineHandler,!1),window.addEventListener("online",r.onlineHandler,!1)):document.body.attachEvent&&(document.body.attachEvent("onoffline",r.offlineHandler),document.body.attachEvent("ononline",r.onlineHandler)),r):r},g.prototype.protocol=function(t){if("string"!=typeof t||0!==t.indexOf("primus::"))return!1;var e=t.indexOf(":",8),r=t.slice(e+2);switch(t.slice(8,e)){case"ping":this.emit("incoming::ping",+r);break;case"server":"close"===r&&(this.disconnect=!0);break;case"id":this.emit("incoming::id",r);break;default:return!1}return!0},g.prototype.transforms=function(t,e,r,n,o){var i={data:n},s=t.transformers[r];return function t(r,n){var o=s[r++];if(!o)return n();if(1===o.length){if(!1===o.call(e,i))return;return t(r,n)}o.call(e,i,function(o,i){if(o)return e.emit("error",o);!1!==i&&t(r,n)})}(0,function(){if("incoming"===r)return e.emit("data",i.data,o);e._write(i.data)}),this},g.prototype.id=function(t){return this.socket&&this.socket.id?t(this.socket.id):(this._write("primus::id::"),this.once("incoming::id",t))},g.prototype.open=function(){return m(this,"open"),!this.recovery.reconnecting()&&this.options.timeout&&this.timeout(),this.emit("outgoing::open"),this},g.prototype.write=function(t){return m(this,"write"),this.transforms(this,this,"outgoing",t),!0},g.prototype._write=function(t){var e=this;return g.OPEN!==e.readyState?(this.buffer.length===this.options.queueSize&&this.buffer.splice(0,1),this.buffer.push(t),!1):(e.encoder(t,function(t,r){if(t)return e.listeners("error").length&&e.emit("error",t);"string"==typeof r&&(~r.indexOf("\u2028")&&(r=r.replace(d,"\\u2028")),~r.indexOf("\u2029")&&(r=r.replace(y,"\\u2029"))),e.emit("outgoing::data",r)}),!0)},g.prototype.heartbeat=function(){return this.options.pingTimeout?(this.timers.clear("heartbeat"),this.timers.setTimeout("heartbeat",function(){this.online&&(this.online=!1,this.emit("offline"),this.emit("incoming::end"))},this.options.pingTimeout),this):this},g.prototype.timeout=function(){var t=this;function e(){t.removeListener("error",e).removeListener("open",e).removeListener("end",e).timers.clear("connect")}return t.timers.setTimeout("connect",function(){e(),t.readyState===g.OPEN||t.recovery.reconnecting()||(t.emit("timeout"),~t.options.strategy.indexOf("timeout")?t.recovery.reconnect():t.end())},t.options.timeout),t.on("error",e).on("open",e).on("end",e)},g.prototype.end=function(t){if(m(this,"end"),this.readyState===g.CLOSED&&!this.timers.active("connect")&&!this.timers.active("open"))return this.recovery.reconnecting()&&(this.recovery.reset(),this.emit("end")),this;void 0!==t&&this.write(t),this.writable=!1,this.readable=!1;var e=this.readyState;return this.readyState=g.CLOSED,e!==this.readyState&&this.emit("readyStateChange","end"),this.timers.clear(),this.emit("outgoing::end"),this.emit("close"),this.emit("end"),this},g.prototype.destroy=f("url timers options recovery socket transport transformers",{before:"end",after:["removeAllListeners",function(){this.NETWORK_EVENTS&&(window.addEventListener?(window.removeEventListener("offline",this.offlineHandler),window.removeEventListener("online",this.onlineHandler)):document.body.attachEvent&&(document.body.detachEvent("onoffline",this.offlineHandler),document.body.detachEvent("ononline",this.onlineHandler)))}]}),g.prototype.clone=function(t){return this.merge({},t)},g.prototype.merge=function(t){for(var e,r,n=1;n<arguments.length;n++)for(e in r=arguments[n])Object.prototype.hasOwnProperty.call(r,e)&&(t[e]=r[e]);return t},g.prototype.parse=t("url-parse"),g.prototype.querystring=p.parse,g.prototype.querystringify=p.stringify,g.prototype.uri=function(t){var e,r=this.url,n=[],o=!1;return t.query&&(o=!0),(t=t||{}).protocol="protocol"in t?t.protocol:"http:",t.query=!(!r.query||!o)&&r.query.slice(1),t.secure="secure"in t?t.secure:"https:"===r.protocol||"wss:"===r.protocol,t.auth="auth"in t?t.auth:r.auth,t.pathname="pathname"in t?t.pathname:this.pathname,t.port="port"in t?+t.port:+r.port||(t.secure?443:80),(e=this.querystring(t.query||""))._primuscb=l(),t.query=this.querystringify(e),this.emit("outgoing::url",t),n.push(t.secure?t.protocol.replace(":","s:"):t.protocol,""),n.push(t.auth?t.auth+"@"+r.host:r.host),t.pathname&&n.push(t.pathname.slice(1)),o?n[n.length-1]+="?"+t.query:delete t.query,t.object?t:n.join("/")},g.prototype.transform=function(t,e){return m(this,"transform"),t in this.transformers?(this.transformers[t].push(e),this):this.critical(new Error("Invalid transformer type"))},g.prototype.critical=function(t){if(this.emit("error",t))return this;throw t},g.connect=function(t,e){return new g(t,e)},g.EventEmitter=a,g.prototype.client=function(){var t,e=this.emits("incoming::data"),r=this.emits("incoming::error"),n=this.emits("incoming::open"),o=this.emits("incoming::end"),i=this,s=function(){if("undefined"!=typeof eio)return eio;try{return g.requires("engine.io-client")}catch(t){}}();if(!s)return i.critical(new Error("Missing required `engine.io-client` module. Please run `npm install --save engine.io-client`"));i.on("outgoing::open",function(){i.emit("outgoing::end"),i.socket=t=s(i.merge(i.transport,i.url,i.uri({protocol:"http:",query:!0,object:!0}),{rememberUpgrade:!1,forceBase64:!0,enablesXDR:!1,timestampRequests:!0,path:this.pathname,transports:i.AVOID_WEBSOCKETS?["polling"]:["polling","websocket"]})),s.sockets&&s.sockets.length&&(s.sockets.length=0),t.on("message",e),t.on("error",r),t.on("close",o),t.on("open",n)}),i.on("outgoing::data",function(e){t&&t.send(e)}),i.on("outgoing::reconnect",function(){i.emit("outgoing::open")}),i.on("outgoing::end",function(){t&&(t.removeListener("message",e),t.removeListener("error",r),t.removeListener("close",o),t.removeListener("open",n),t.close(),t=null)})},g.prototype.authorization=!1,g.prototype.pathname="/primus",g.prototype.encoder=function(t,e){var r;try{t=JSON.stringify(t)}catch(t){r=t}e(r,t)},g.prototype.decoder=function(t,e){var r;if("string"!=typeof t)return e(r,t);try{t=JSON.parse(t)}catch(t){r=t}e(r,t)},g.prototype.version="7.2.2","undefined"!=typeof document&&"undefined"!=typeof navigator&&(document.addEventListener&&document.addEventListener("keydown",function(t){27===t.keyCode&&t.preventDefault&&t.preventDefault()},!1),s=+[(i=(o=(navigator.userAgent||"").toLowerCase()).match(/.+(?:rv|it|ra|ie)[/: ](\d+)\.(\d+)(?:\.(\d+))?/)||[])[1],i[2]].join("."),!~o.indexOf("chrome")&&~o.indexOf("safari")&&s<534.54&&(g.prototype.AVOID_WEBSOCKETS=!0)),e.exports=g},{demolish:1,emits:2,eventemitter3:3,inherits:4,querystringify:7,recovery:8,"tick-tock":11,"url-parse":12,yeast:13}]},{},[14])(14)},[function(t){var e;"undefined"!=typeof window?e=window:"undefined"!=typeof self&&(e=self),e.eio=function t(e,r,n){var o,i;function s(i,a){var c,u,p;if(!r[i]){if(!e[i]){if(c="function"==typeof require&&require,!a&&c)return c(i,!0);if(o)return o(i,!0);throw(u=new Error("Cannot find module '"+i+"'")).code="MODULE_NOT_FOUND",u}p=r[i]={exports:{}},e[i][0].call(p.exports,function(t){var r=e[i][1][t];return s(r||t)},p,p.exports,t,e,r,n)}return r[i].exports}for(o="function"==typeof require&&require,i=0;i<n.length;i++)s(n[i]);return s}({1:[function(t,e,r){e.exports=t("./socket"),e.exports.parser=t("engine.io-parser")},{"./socket":2,"engine.io-parser":16}],2:[function(t,e,r){(function(r){var n=t("./transports/index"),o=t("component-emitter"),i=t("indexof"),s=t("engine.io-parser"),a=t("parseuri"),c=t("parsejson"),u=t("parseqs");function p(t,e){if(!(this instanceof p))return new p(t,e);e=e||{},t&&"object"==typeof t&&(e=t,t=null),t?(t=a(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=a(e.host).host),this.secure=null!=e.secure?e.secure:r.location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.agent=e.agent||!1,this.hostname=e.hostname||(r.location?location.hostname:"localhost"),this.port=e.port||(r.location&&location.port?location.port:this.secure?443:80),this.query=e.query||{},"string"==typeof this.query&&(this.query=u.decode(this.query)),this.upgrade=!1!==e.upgrade,this.path=(e.path||"/engine.io").replace(/\/$/,"")+"/",this.forceJSONP=!!e.forceJSONP,this.jsonp=!1!==e.jsonp,this.forceBase64=!!e.forceBase64,this.enablesXDR=!!e.enablesXDR,this.timestampParam=e.timestampParam||"t",this.timestampRequests=e.timestampRequests,this.transports=e.transports||["polling","websocket"],this.transportOptions=e.transportOptions||{},this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.policyPort=e.policyPort||843,this.rememberUpgrade=e.rememberUpgrade||!1,this.binaryType=null,this.onlyBinaryUpgrades=e.onlyBinaryUpgrades,this.perMessageDeflate=!1!==e.perMessageDeflate&&(e.perMessageDeflate||{}),!0===this.perMessageDeflate&&(this.perMessageDeflate={}),this.perMessageDeflate&&null==this.perMessageDeflate.threshold&&(this.perMessageDeflate.threshold=1024),this.pfx=e.pfx||null,this.key=e.key||null,this.passphrase=e.passphrase||null,this.cert=e.cert||null,this.ca=e.ca||null,this.ciphers=e.ciphers||null,this.rejectUnauthorized=void 0===e.rejectUnauthorized||e.rejectUnauthorized,this.forceNode=!!e.forceNode;var n="object"==typeof r&&r;n.global===n&&(e.extraHeaders&&Object.keys(e.extraHeaders).length>0&&(this.extraHeaders=e.extraHeaders),e.localAddress&&(this.localAddress=e.localAddress)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingIntervalTimer=null,this.pingTimeoutTimer=null,this.open()}e.exports=p,p.priorWebsocketSuccess=!1,o(p.prototype),p.protocol=s.protocol,p.Socket=p,p.Transport=t("./transport"),p.transports=t("./transports/index"),p.parser=t("engine.io-parser"),p.prototype.createTransport=function(t){var e,r=function(t){var e,r={};for(e in t)t.hasOwnProperty(e)&&(r[e]=t[e]);return r}(this.query);return r.EIO=s.protocol,r.transport=t,e=this.transportOptions[t]||{},this.id&&(r.sid=this.id),new n[t]({query:r,socket:this,agent:e.agent||this.agent,hostname:e.hostname||this.hostname,port:e.port||this.port,secure:e.secure||this.secure,path:e.path||this.path,forceJSONP:e.forceJSONP||this.forceJSONP,jsonp:e.jsonp||this.jsonp,forceBase64:e.forceBase64||this.forceBase64,enablesXDR:e.enablesXDR||this.enablesXDR,timestampRequests:e.timestampRequests||this.timestampRequests,timestampParam:e.timestampParam||this.timestampParam,policyPort:e.policyPort||this.policyPort,pfx:e.pfx||this.pfx,key:e.key||this.key,passphrase:e.passphrase||this.passphrase,cert:e.cert||this.cert,ca:e.ca||this.ca,ciphers:e.ciphers||this.ciphers,rejectUnauthorized:e.rejectUnauthorized||this.rejectUnauthorized,perMessageDeflate:e.perMessageDeflate||this.perMessageDeflate,extraHeaders:e.extraHeaders||this.extraHeaders,forceNode:e.forceNode||this.forceNode,localAddress:e.localAddress||this.localAddress,requestTimeout:e.requestTimeout||this.requestTimeout,protocols:e.protocols||void 0})},p.prototype.open=function(){var t,e;if(this.rememberUpgrade&&p.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))t="websocket";else{if(0===this.transports.length)return e=this,void setTimeout(function(){e.emit("error","No transports available")},0);t=this.transports[0]}this.readyState="opening";try{t=this.createTransport(t)}catch(t){return this.transports.shift(),void this.open()}t.open(),this.setTransport(t)},p.prototype.setTransport=function(t){var e=this;this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",function(){e.onDrain()}).on("packet",function(t){e.onPacket(t)}).on("error",function(t){e.onError(t)}).on("close",function(){e.onClose("transport close")})},p.prototype.probe=function(t){var e=this.createTransport(t,{probe:1}),r=!1,n=this;function o(){if(n.onlyBinaryUpgrades){var t=!this.supportsBinary&&n.transport.supportsBinary;r=r||t}r||(e.send([{type:"ping",data:"probe"}]),e.once("packet",function(t){if(!r)if("pong"===t.type&&"probe"===t.data){if(n.upgrading=!0,n.emit("upgrading",e),!e)return;p.priorWebsocketSuccess="websocket"===e.name,n.transport.pause(function(){r||"closed"!==n.readyState&&(h(),n.setTransport(e),e.send([{type:"upgrade"}]),n.emit("upgrade",e),e=null,n.upgrading=!1,n.flush())})}else{var o=new Error("probe error");o.transport=e.name,n.emit("upgradeError",o)}}))}function i(){r||(r=!0,h(),e.close(),e=null)}function s(t){var r=new Error("probe error: "+t);r.transport=e.name,i(),n.emit("upgradeError",r)}function a(){s("transport closed")}function c(){s("socket closed")}function u(t){e&&t.name!==e.name&&i()}function h(){e.removeListener("open",o),e.removeListener("error",s),e.removeListener("close",a),n.removeListener("close",c),n.removeListener("upgrading",u)}p.priorWebsocketSuccess=!1,e.once("open",o),e.once("error",s),e.once("close",a),this.once("close",c),this.once("upgrading",u),e.open()},p.prototype.onOpen=function(){if(this.readyState="open",p.priorWebsocketSuccess="websocket"===this.transport.name,this.emit("open"),this.flush(),"open"===this.readyState&&this.upgrade&&this.transport.pause)for(var t=0,e=this.upgrades.length;t<e;t++)this.probe(this.upgrades[t])},p.prototype.onPacket=function(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emit("packet",t),this.emit("heartbeat"),t.type){case"open":this.onHandshake(c(t.data));break;case"pong":this.setPing(),this.emit("pong");break;case"error":var e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emit("data",t.data),this.emit("message",t.data)}},p.prototype.onHandshake=function(t){this.emit("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.onOpen(),"closed"!==this.readyState&&(this.setPing(),this.removeListener("heartbeat",this.onHeartbeat),this.on("heartbeat",this.onHeartbeat))},p.prototype.onHeartbeat=function(t){clearTimeout(this.pingTimeoutTimer);var e=this;e.pingTimeoutTimer=setTimeout(function(){"closed"!==e.readyState&&e.onClose("ping timeout")},t||e.pingInterval+e.pingTimeout)},p.prototype.setPing=function(){var t=this;clearTimeout(t.pingIntervalTimer),t.pingIntervalTimer=setTimeout(function(){t.ping(),t.onHeartbeat(t.pingTimeout)},t.pingInterval)},p.prototype.ping=function(){var t=this;this.sendPacket("ping",function(){t.emit("ping")})},p.prototype.onDrain=function(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emit("drain"):this.flush()},p.prototype.flush=function(){"closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length&&(this.transport.send(this.writeBuffer),this.prevBufferLen=this.writeBuffer.length,this.emit("flush"))},p.prototype.write=p.prototype.send=function(t,e,r){return this.sendPacket("message",t,e,r),this},p.prototype.sendPacket=function(t,e,r,n){if("function"==typeof e&&(n=e,e=void 0),"function"==typeof r&&(n=r,r=null),"closing"!==this.readyState&&"closed"!==this.readyState){(r=r||{}).compress=!1!==r.compress;var o={type:t,data:e,options:r};this.emit("packetCreate",o),this.writeBuffer.push(o),n&&this.once("flush",n),this.flush()}},p.prototype.close=function(){if("opening"===this.readyState||"open"===this.readyState){this.readyState="closing";var t=this;this.writeBuffer.length?this.once("drain",function(){this.upgrading?n():e()}):this.upgrading?n():e()}function e(){t.onClose("forced close"),t.transport.close()}function r(){t.removeListener("upgrade",r),t.removeListener("upgradeError",r),e()}function n(){t.once("upgrade",r),t.once("upgradeError",r)}return this},p.prototype.onError=function(t){p.priorWebsocketSuccess=!1,this.emit("error",t),this.onClose("transport error",t)},p.prototype.onClose=function(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(clearTimeout(this.pingIntervalTimer),clearTimeout(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),this.readyState="closed",this.id=null,this.emit("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)},p.prototype.filterUpgrades=function(t){var e,r,n=[];for(e=0,r=t.length;e<r;e++)~i(this.transports,t[e])&&n.push(t[e]);return n}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./transport":3,"./transports/index":4,"component-emitter":14,"engine.io-parser":16,indexof:21,parsejson:23,parseqs:24,parseuri:25}],3:[function(t,e,r){var n=t("engine.io-parser"),o=t("component-emitter");function i(t){this.path=t.path,this.hostname=t.hostname,this.port=t.port,this.secure=t.secure,this.query=t.query,this.timestampParam=t.timestampParam,this.timestampRequests=t.timestampRequests,this.readyState="",this.agent=t.agent||!1,this.socket=t.socket,this.enablesXDR=t.enablesXDR,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.forceNode=t.forceNode,this.extraHeaders=t.extraHeaders,this.localAddress=t.localAddress}e.exports=i,o(i.prototype),i.prototype.onError=function(t,e){var r=new Error(t);return r.type="TransportError",r.description=e,this.emit("error",r),this},i.prototype.open=function(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this},i.prototype.close=function(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this},i.prototype.send=function(t){if("open"!==this.readyState)throw new Error("Transport not open");this.write(t)},i.prototype.onOpen=function(){this.readyState="open",this.writable=!0,this.emit("open")},i.prototype.onData=function(t){var e=n.decodePacket(t,this.socket.binaryType);this.onPacket(e)},i.prototype.onPacket=function(t){this.emit("packet",t)},i.prototype.onClose=function(){this.readyState="closed",this.emit("close")}},{"component-emitter":14,"engine.io-parser":16}],4:[function(t,e,r){(function(e){var n=t("xmlhttprequest-ssl"),o=t("./polling-xhr"),i=t("./polling-jsonp"),s=t("./websocket");r.polling=function(t){var r,s,a=!1,c=!1,u=!1!==t.jsonp;if(e.location&&(r="https:"===location.protocol,(s=location.port)||(s=r?443:80),a=t.hostname!==location.hostname||s!==t.port,c=t.secure!==r),t.xdomain=a,t.xscheme=c,"open"in new n(t)&&!t.forceJSONP)return new o(t);if(!u)throw new Error("JSONP disabled");return new i(t)},r.websocket=s}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling-jsonp":5,"./polling-xhr":6,"./websocket":8,"xmlhttprequest-ssl":9}],5:[function(t,e,r){(function(r){var n,o,i,s=t("./polling"),a=t("component-inherit");function c(){}function u(t){s.call(this,t),this.query=this.query||{},i||(r.___eio||(r.___eio=[]),i=r.___eio),this.index=i.length;var e=this;i.push(function(t){e.onData(t)}),this.query.j=this.index,r.document&&r.addEventListener&&r.addEventListener("beforeunload",function(){e.script&&(e.script.onerror=c)},!1)}e.exports=u,n=/\n/g,o=/\\n/g,a(u,s),u.prototype.supportsBinary=!1,u.prototype.doClose=function(){this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),this.form&&(this.form.parentNode.removeChild(this.form),this.form=null,this.iframe=null),s.prototype.doClose.call(this)},u.prototype.doPoll=function(){var t,e=this,r=document.createElement("script");this.script&&(this.script.parentNode.removeChild(this.script),this.script=null),r.async=!0,r.src=this.uri(),r.onerror=function(t){e.onError("jsonp poll error",t)},(t=document.getElementsByTagName("script")[0])?t.parentNode.insertBefore(r,t):(document.head||document.body).appendChild(r),this.script=r,"undefined"!=typeof navigator&&/gecko/i.test(navigator.userAgent)&&setTimeout(function(){var t=document.createElement("iframe");document.body.appendChild(t),document.body.removeChild(t)},100)},u.prototype.doWrite=function(t,e){var r,i,s,a,c=this;function u(){p(),e()}function p(){if(c.iframe)try{c.form.removeChild(c.iframe)}catch(t){c.onError("jsonp polling iframe removal error",t)}try{var t='<iframe src="javascript:0" name="'+c.iframeId+'">';a=document.createElement(t)}catch(t){(a=document.createElement("iframe")).name=c.iframeId,a.src="javascript:0"}a.id=c.iframeId,c.form.appendChild(a),c.iframe=a}this.form||(r=document.createElement("form"),i=document.createElement("textarea"),s=this.iframeId="eio_iframe_"+this.index,r.className="socketio",r.style.position="absolute",r.style.top="-1000px",r.style.left="-1000px",r.target=s,r.method="POST",r.setAttribute("accept-charset","utf-8"),i.name="d",r.appendChild(i),document.body.appendChild(r),this.form=r,this.area=i),this.form.action=this.uri(),p(),t=t.replace(o,"\\\n"),this.area.value=t.replace(n,"\\n");try{this.form.submit()}catch(t){}this.iframe.attachEvent?this.iframe.onreadystatechange=function(){"complete"===c.iframe.readyState&&u()}:this.iframe.onload=u}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":7,"component-inherit":15}],6:[function(t,e,r){(function(r){var n=t("xmlhttprequest-ssl"),o=t("./polling"),i=t("component-emitter"),s=t("component-inherit");function a(){}function c(t){var e,n;o.call(this,t),this.requestTimeout=t.requestTimeout,this.extraHeaders=t.extraHeaders,r.location&&(e="https:"===location.protocol,(n=location.port)||(n=e?443:80),this.xd=t.hostname!==r.location.hostname||n!==t.port,this.xs=t.secure!==e)}function u(t){this.method=t.method||"GET",this.uri=t.uri,this.xd=!!t.xd,this.xs=!!t.xs,this.async=!1!==t.async,this.data=void 0!==t.data?t.data:null,this.agent=t.agent,this.isBinary=t.isBinary,this.supportsBinary=t.supportsBinary,this.enablesXDR=t.enablesXDR,this.requestTimeout=t.requestTimeout,this.pfx=t.pfx,this.key=t.key,this.passphrase=t.passphrase,this.cert=t.cert,this.ca=t.ca,this.ciphers=t.ciphers,this.rejectUnauthorized=t.rejectUnauthorized,this.extraHeaders=t.extraHeaders,this.create()}function p(){for(var t in u.requests)u.requests.hasOwnProperty(t)&&u.requests[t].abort()}e.exports=c,e.exports.Request=u,s(c,o),c.prototype.supportsBinary=!0,c.prototype.request=function(t){return(t=t||{}).uri=this.uri(),t.xd=this.xd,t.xs=this.xs,t.agent=this.agent||!1,t.supportsBinary=this.supportsBinary,t.enablesXDR=this.enablesXDR,t.pfx=this.pfx,t.key=this.key,t.passphrase=this.passphrase,t.cert=this.cert,t.ca=this.ca,t.ciphers=this.ciphers,t.rejectUnauthorized=this.rejectUnauthorized,t.requestTimeout=this.requestTimeout,t.extraHeaders=this.extraHeaders,new u(t)},c.prototype.doWrite=function(t,e){var r="string"!=typeof t&&void 0!==t,n=this.request({method:"POST",data:t,isBinary:r}),o=this;n.on("success",e),n.on("error",function(t){o.onError("xhr post error",t)}),this.sendXhr=n},c.prototype.doPoll=function(){var t=this.request(),e=this;t.on("data",function(t){e.onData(t)}),t.on("error",function(t){e.onError("xhr poll error",t)}),this.pollXhr=t},i(u.prototype),u.prototype.create=function(){var t,e,o,i={agent:this.agent,xdomain:this.xd,xscheme:this.xs,enablesXDR:this.enablesXDR};i.pfx=this.pfx,i.key=this.key,i.passphrase=this.passphrase,i.cert=this.cert,i.ca=this.ca,i.ciphers=this.ciphers,i.rejectUnauthorized=this.rejectUnauthorized,t=this.xhr=new n(i),e=this;try{t.open(this.method,this.uri,this.async);try{if(this.extraHeaders)for(o in t.setDisableHeaderCheck&&t.setDisableHeaderCheck(!0),this.extraHeaders)this.extraHeaders.hasOwnProperty(o)&&t.setRequestHeader(o,this.extraHeaders[o])}catch(t){}if(this.supportsBinary&&(t.responseType="arraybuffer"),"POST"===this.method)try{this.isBinary?t.setRequestHeader("Content-type","application/octet-stream"):t.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch(t){}try{t.setRequestHeader("Accept","*/*")}catch(t){}"withCredentials"in t&&(t.withCredentials=!0),this.requestTimeout&&(t.timeout=this.requestTimeout),this.hasXDR()?(t.onload=function(){e.onLoad()},t.onerror=function(){e.onError(t.responseText)}):t.onreadystatechange=function(){4===t.readyState&&(200===t.status||1223===t.status?e.onLoad():setTimeout(function(){e.onError(t.status)},0))},t.send(this.data)}catch(t){return void setTimeout(function(){e.onError(t)},0)}r.document&&(this.index=u.requestsCount++,u.requests[this.index]=this)},u.prototype.onSuccess=function(){this.emit("success"),this.cleanup()},u.prototype.onData=function(t){this.emit("data",t),this.onSuccess()},u.prototype.onError=function(t){this.emit("error",t),this.cleanup(!0)},u.prototype.cleanup=function(t){if(void 0!==this.xhr&&null!==this.xhr){if(this.hasXDR()?this.xhr.onload=this.xhr.onerror=a:this.xhr.onreadystatechange=a,t)try{this.xhr.abort()}catch(t){}r.document&&delete u.requests[this.index],this.xhr=null}},u.prototype.onLoad=function(){var t,e,r,n,o,i;try{try{e=this.xhr.getResponseHeader("Content-Type").split(";")[0]}catch(t){}if("application/octet-stream"===e)t=this.xhr.response||this.xhr.responseText;else if(this.supportsBinary)try{t=String.fromCharCode.apply(null,new Uint8Array(this.xhr.response))}catch(e){for(r=new Uint8Array(this.xhr.response),n=[],o=0,i=r.length;o<i;o++)n.push(r[o]);t=String.fromCharCode.apply(null,n)}else t=this.xhr.responseText}catch(t){this.onError(t)}null!=t&&this.onData(t)},u.prototype.hasXDR=function(){return void 0!==r.XDomainRequest&&!this.xs&&this.enablesXDR},u.prototype.abort=function(){this.cleanup()},u.requestsCount=0,u.requests={},r.document&&(r.attachEvent?r.attachEvent("onunload",p):r.addEventListener&&r.addEventListener("beforeunload",p,!1))}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./polling":7,"component-emitter":14,"component-inherit":15,"xmlhttprequest-ssl":9}],7:[function(t,e,r){var n,o,i,s=t("../transport"),a=t("parseqs"),c=t("engine.io-parser"),u=t("component-inherit"),p=t("yeast");function h(t){var e=t&&t.forceBase64;n&&!e||(this.supportsBinary=!1),s.call(this,t)}e.exports=h,o=t("xmlhttprequest-ssl"),i=new o({xdomain:!1}),n=null!=i.responseType,u(h,s),h.prototype.name="polling",h.prototype.doOpen=function(){this.poll()},h.prototype.pause=function(t){var e,r=this;function n(){r.readyState="paused",t()}this.readyState="pausing",this.polling||!this.writable?(e=0,this.polling&&(e++,this.once("pollComplete",function(){--e||n()})),this.writable||(e++,this.once("drain",function(){--e||n()}))):n()},h.prototype.poll=function(){this.polling=!0,this.doPoll(),this.emit("poll")},h.prototype.onData=function(t){var e=this,r=function(t,r,n){if("opening"===e.readyState&&e.onOpen(),"close"===t.type)return e.onClose(),!1;e.onPacket(t)};c.decodePayload(t,this.socket.binaryType,this.supportsBinary,r),"closed"!==this.readyState&&(this.polling=!1,this.emit("pollComplete"),"open"===this.readyState&&this.poll())},h.prototype.doClose=function(){var t=this;function e(){t.write([{type:"close"}])}"open"===this.readyState?e():this.once("open",e)},h.prototype.write=function(t){var e,r=this;this.writable=!1,e=function(){r.writable=!0,r.emit("drain")},c.encodePayload(t,this.supportsBinary,function(t){r.doWrite(t,e)})},h.prototype.uri=function(){var t,e=this.query||{},r=this.secure?"https":"http",n="";return!1!==this.timestampRequests&&(e[this.timestampParam]=p()),this.supportsBinary||e.sid||(e.b64=1),e=a.encode(e),this.port&&("https"===r&&443!==Number(this.port)||"http"===r&&80!==Number(this.port))&&(n=":"+this.port),e.length&&(e="?"+e),t=-1!==this.hostname.indexOf(":"),r+"://"+(t?"["+this.hostname+"]":this.hostname)+n+this.path+e}},{"../transport":3,"component-inherit":15,"engine.io-parser":16,parseqs:24,"xmlhttprequest-ssl":9,yeast:26}],8:[function(t,e,r){(function(r){var n,o,i=t("../transport"),s=t("engine.io-parser"),a=t("parseqs"),c=t("component-inherit"),u=t("yeast"),p=r.WebSocket||r.MozWebSocket;if("undefined"==typeof window)try{n=t("ws")}catch(t){}function h(t){var e=t&&t.forceBase64;e&&(this.supportsBinary=!1),this.perMessageDeflate=t.perMessageDeflate,this.usingBrowserWebSocket=p&&!t.forceNode,this.protocols=t.protocols,this.usingBrowserWebSocket||(o=n),i.call(this,t)}(o=p)||"undefined"!=typeof window||(o=n),e.exports=h,c(h,i),h.prototype.name="websocket",h.prototype.supportsBinary=!0,h.prototype.doOpen=function(){var t,e,r;if(this.check()){t=this.uri(),e=this.protocols,(r={agent:this.agent,perMessageDeflate:this.perMessageDeflate}).pfx=this.pfx,r.key=this.key,r.passphrase=this.passphrase,r.cert=this.cert,r.ca=this.ca,r.ciphers=this.ciphers,r.rejectUnauthorized=this.rejectUnauthorized,this.extraHeaders&&(r.headers=this.extraHeaders),this.localAddress&&(r.localAddress=this.localAddress);try{this.ws=this.usingBrowserWebSocket?e?new o(t,e):new o(t):new o(t,e,r)}catch(t){return this.emit("error",t)}void 0===this.ws.binaryType&&(this.supportsBinary=!1),this.ws.supports&&this.ws.supports.binary?(this.supportsBinary=!0,this.ws.binaryType="nodebuffer"):this.ws.binaryType="arraybuffer",this.addEventListeners()}},h.prototype.addEventListeners=function(){var t=this;this.ws.onopen=function(){t.onOpen()},this.ws.onclose=function(){t.onClose()},this.ws.onmessage=function(e){t.onData(e.data)},this.ws.onerror=function(e){t.onError("websocket error",e)}},h.prototype.write=function(t){var e,n,o,i=this;for(this.writable=!1,e=t.length,n=0,o=e;n<o;n++)!function(t){s.encodePacket(t,i.supportsBinary,function(n){var o;i.usingBrowserWebSocket||(o={},t.options&&(o.compress=t.options.compress),i.perMessageDeflate&&("string"==typeof n?r.Buffer.byteLength(n):n.length)<i.perMessageDeflate.threshold&&(o.compress=!1));try{i.usingBrowserWebSocket?i.ws.send(n):i.ws.send(n,o)}catch(t){}--e||(i.emit("flush"),setTimeout(function(){i.writable=!0,i.emit("drain")},0))})}(t[n])},h.prototype.onClose=function(){i.prototype.onClose.call(this)},h.prototype.doClose=function(){void 0!==this.ws&&this.ws.close()},h.prototype.uri=function(){var t,e=this.query||{},r=this.secure?"wss":"ws",n="";return this.port&&("wss"===r&&443!==Number(this.port)||"ws"===r&&80!==Number(this.port))&&(n=":"+this.port),this.timestampRequests&&(e[this.timestampParam]=u()),this.supportsBinary||(e.b64=1),(e=a.encode(e)).length&&(e="?"+e),t=-1!==this.hostname.indexOf(":"),r+"://"+(t?"["+this.hostname+"]":this.hostname)+n+this.path+e},h.prototype.check=function(){return!(!o||"__initialize"in o&&this.name===h.prototype.name)}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"../transport":3,"component-inherit":15,"engine.io-parser":16,parseqs:24,ws:void 0,yeast:26}],9:[function(t,e,r){(function(r){var n=t("has-cors");e.exports=function(t){var e=t.xdomain,o=t.xscheme,i=t.enablesXDR;try{if("undefined"!=typeof XMLHttpRequest&&(!e||n))return new XMLHttpRequest}catch(t){}try{if("undefined"!=typeof XDomainRequest&&!o&&i)return new XDomainRequest}catch(t){}if(!e)try{return new(r[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(t){}}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"has-cors":20}],10:[function(t,e,r){function n(){}e.exports=function(t,e,r){var o=!1;return r=r||n,i.count=t,0===t?e():i;function i(t,n){if(i.count<=0)throw new Error("after called too many times");--i.count,t?(o=!0,e(t),e=r):0!==i.count||o||e(null,n)}}},{}],11:[function(t,e,r){e.exports=function(t,e,r){var n,o,i,s,a=t.byteLength;if(e=e||0,r=r||a,t.slice)return t.slice(e,r);if(e<0&&(e+=a),r<0&&(r+=a),r>a&&(r=a),e>=a||e>=r||0===a)return new ArrayBuffer(0);for(n=new Uint8Array(t),o=new Uint8Array(r-e),i=e,s=0;i<r;i++,s++)o[s]=n[i];return o.buffer}},{}],12:[function(t,e,r){!function(){"use strict";var t,e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",n=new Uint8Array(256);for(t=0;t<e.length;t++)n[e.charCodeAt(t)]=t;r.encode=function(t){var r,n=new Uint8Array(t),o=n.length,i="";for(r=0;r<o;r+=3)i+=e[n[r]>>2],i+=e[(3&n[r])<<4|n[r+1]>>4],i+=e[(15&n[r+1])<<2|n[r+2]>>6],i+=e[63&n[r+2]];return o%3==2?i=i.substring(0,i.length-1)+"=":o%3==1&&(i=i.substring(0,i.length-2)+"=="),i},r.decode=function(t){var e,r,o,i,s,a,c,u=.75*t.length,p=t.length,h=0;for("="===t[t.length-1]&&(u--,"="===t[t.length-2]&&u--),a=new ArrayBuffer(u),c=new Uint8Array(a),e=0;e<p;e+=4)r=n[t.charCodeAt(e)],o=n[t.charCodeAt(e+1)],i=n[t.charCodeAt(e+2)],s=n[t.charCodeAt(e+3)],c[h++]=r<<2|o>>4,c[h++]=(15&o)<<4|i>>2,c[h++]=(3&i)<<6|63&s;return a}}()},{}],13:[function(t,e,r){(function(t){var r=t.BlobBuilder||t.WebKitBlobBuilder||t.MSBlobBuilder||t.MozBlobBuilder,n=function(){try{var t=new Blob(["hi"]);return 2===t.size}catch(t){return!1}}(),o=n&&function(){try{var t=new Blob([new Uint8Array([1,2])]);return 2===t.size}catch(t){return!1}}(),i=r&&r.prototype.append&&r.prototype.getBlob;function s(t){var e,r,n,o;for(e=0;e<t.length;e++)(r=t[e]).buffer instanceof ArrayBuffer&&(n=r.buffer,r.byteLength!==n.byteLength&&((o=new Uint8Array(r.byteLength)).set(new Uint8Array(n,r.byteOffset,r.byteLength)),n=o.buffer),t[e]=n)}function a(t,e){var n,o;for(e=e||{},n=new r,s(t),o=0;o<t.length;o++)n.append(t[o]);return e.type?n.getBlob(e.type):n.getBlob()}function c(t,e){return s(t),new Blob(t,e||{})}e.exports=n?o?t.Blob:c:i?a:void 0}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],14:[function(t,e,r){function n(t){if(t)return function(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}(t)}void 0!==e&&(e.exports=n),n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},n.prototype.once=function(t,e){function r(){this.off(t,r),e.apply(this,arguments)}return r.fn=e,this.on(t,r),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){var r,n,o;if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;if(!(r=this._callbacks["$"+t]))return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(o=0;o<r.length;o++)if((n=r[o])===e||n.fn===e){r.splice(o,1);break}return this},n.prototype.emit=function(t){var e,r,n,o;if(this._callbacks=this._callbacks||{},e=[].slice.call(arguments,1),r=this._callbacks["$"+t])for(r=r.slice(0),n=0,o=r.length;n<o;++n)r[n].apply(this,e);return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length}},{}],15:[function(t,e,r){e.exports=function(t,e){var r=function(){};r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t}},{}],16:[function(t,e,r){(function(e){var n,o,i,s,a,c,u,p,h=t("./keys"),f=t("has-binary2"),l=t("arraybuffer.slice"),d=t("after"),y=t("./utf8");function m(t){try{t=y.decode(t,{strict:!1})}catch(t){return!1}return t}function g(t,e,r){var n,o=new Array(t.length),i=d(t.length,r),s=function(t,r,n){e(r,function(e,r){o[t]=r,n(e,o)})};for(n=0;n<t.length;n++)s(n,t[n],i)}e&&e.ArrayBuffer&&(n=t("base64-arraybuffer")),o="undefined"!=typeof navigator&&/Android/i.test(navigator.userAgent),i="undefined"!=typeof navigator&&/PhantomJS/i.test(navigator.userAgent),s=o||i,r.protocol=3,a=r.packets={open:0,close:1,ping:2,pong:3,message:4,upgrade:5,noop:6},c=h(a),u={type:"error",data:"parser error"},p=t("blob"),r.encodePacket=function(t,n,o,i){var c,u;return"function"==typeof n&&(i=n,n=!1),"function"==typeof o&&(i=o,o=null),c=void 0===t.data?void 0:t.data.buffer||t.data,e.ArrayBuffer&&c instanceof ArrayBuffer?function(t,e,n){var o,i,s,c;if(!e)return r.encodeBase64Packet(t,n);for(o=t.data,i=new Uint8Array(o),(s=new Uint8Array(1+o.byteLength))[0]=a[t.type],c=0;c<i.length;c++)s[c+1]=i[c];return n(s.buffer)}(t,n,i):p&&c instanceof e.Blob?function(t,e,n){var o,i;return e?s?function(t,e,n){if(!e)return r.encodeBase64Packet(t,n);var o=new FileReader;return o.onload=function(){t.data=o.result,r.encodePacket(t,e,!0,n)},o.readAsArrayBuffer(t.data)}(t,e,n):((o=new Uint8Array(1))[0]=a[t.type],i=new p([o.buffer,t.data]),n(i)):r.encodeBase64Packet(t,n)}(t,n,i):c&&c.base64?function(t,e){var n="b"+r.packets[t.type]+t.data.data;return e(n)}(t,i):(u=a[t.type],void 0!==t.data&&(u+=o?y.encode(String(t.data),{strict:!1}):String(t.data)),i(""+u))},r.encodeBase64Packet=function(t,n){var o,i,s,a,c,u="b"+r.packets[t.type];if(p&&t.data instanceof e.Blob)return(o=new FileReader).onload=function(){var t=o.result.split(",")[1];n(u+t)},o.readAsDataURL(t.data);try{i=String.fromCharCode.apply(null,new Uint8Array(t.data))}catch(e){for(s=new Uint8Array(t.data),a=new Array(s.length),c=0;c<s.length;c++)a[c]=s[c];i=String.fromCharCode.apply(null,a)}return u+=e.btoa(i),n(u)},r.decodePacket=function(t,e,n){var o,i,s;return void 0===t?u:"string"==typeof t?"b"===t.charAt(0)?r.decodeBase64Packet(t.substr(1),e):n&&!1===(t=m(t))?u:(o=t.charAt(0),Number(o)==o&&c[o]?t.length>1?{type:c[o],data:t.substring(1)}:{type:c[o]}:u):(i=new Uint8Array(t),o=i[0],s=l(t,1),p&&"blob"===e&&(s=new p([s])),{type:c[o],data:s})},r.decodeBase64Packet=function(t,e){var r,o=c[t.charAt(0)];return n?(r=n.decode(t.substr(1)),"blob"===e&&p&&(r=new p([r])),{type:o,data:r}):{type:o,data:{base64:!0,data:t.substr(1)}}},r.encodePayload=function(t,e,n){"function"==typeof e&&(n=e,e=null);var o=f(t);return e&&o?p&&!s?r.encodePayloadAsBlob(t,n):r.encodePayloadAsArrayBuffer(t,n):t.length?void g(t,function(t,n){r.encodePacket(t,!!o&&e,!1,function(t){n(null,function(t){return t.length+":"+t}(t))})},function(t,e){return n(e.join(""))}):n("0:")},r.decodePayload=function(t,e,n,o){var i,s,a,c,p,h,f;if("string"!=typeof t)return r.decodePayloadAsBinary(t,e,o);if("function"==typeof e&&(o=e,e=null),"function"==typeof n&&(o=n,n=null),""===t)return o(u,0,1);if(n&&!1===(t=m(t)))return o(u,0,1);for(s="",p=0,h=t.length;p<h;p++)if(":"===(f=t.charAt(p))){if(""===s||s!=(a=Number(s)))return o(u,0,1);if(c=t.substr(p+1,a),s!=c.length)return o(u,0,1);if(c.length){if(i=r.decodePacket(c,e,!1),u.type===i.type&&u.data===i.data)return o(u,0,1);if(!1===o(i,p+a,h))return}p+=a,s=""}else s+=f;return""!==s?o(u,0,1):void 0},r.encodePayloadAsArrayBuffer=function(t,e){if(!t.length)return e(new ArrayBuffer(0));g(t,function(t,e){r.encodePacket(t,!0,!0,function(t){return e(null,t)})},function(t,r){var n=r.reduce(function(t,e){var r;return r="string"==typeof e?e.length:e.byteLength,t+r.toString().length+r+2},0),o=new Uint8Array(n),i=0;return r.forEach(function(t){var e,r,n,s="string"==typeof t,a=t;if(s){for(e=new Uint8Array(t.length),r=0;r<t.length;r++)e[r]=t.charCodeAt(r);a=e.buffer}for(o[i++]=s?0:1,n=a.byteLength.toString(),r=0;r<n.length;r++)o[i++]=parseInt(n[r]);for(o[i++]=255,e=new Uint8Array(a),r=0;r<e.length;r++)o[i++]=e[r]}),e(o.buffer)})},r.encodePayloadAsBlob=function(t,e){g(t,function(t,e){r.encodePacket(t,!0,!0,function(t){var r,n,o,i,s,a,c=new Uint8Array(1);if(c[0]=1,"string"==typeof t){for(r=new Uint8Array(t.length),n=0;n<t.length;n++)r[n]=t.charCodeAt(n);t=r.buffer,c[0]=0}for(o=t instanceof ArrayBuffer?t.byteLength:t.size,i=o.toString(),s=new Uint8Array(i.length+1),n=0;n<i.length;n++)s[n]=parseInt(i[n]);s[i.length]=255,p&&(a=new p([c.buffer,s.buffer,t]),e(null,a))})},function(t,r){return e(new p(r))})},r.decodePayloadAsBinary=function(t,e,n){var o,i,s,a,c,p,h,f,d;for("function"==typeof e&&(n=e,e=null),o=t,i=[];o.byteLength>0;){for(s=new Uint8Array(o),a=0===s[0],c="",p=1;255!==s[p];p++){if(c.length>310)return n(u,0,1);c+=s[p]}if(o=l(o,2+c.length),c=parseInt(c),h=l(o,0,c),a)try{h=String.fromCharCode.apply(null,new Uint8Array(h))}catch(t){for(f=new Uint8Array(h),h="",p=0;p<f.length;p++)h+=String.fromCharCode(f[p])}i.push(h),o=l(o,c)}d=i.length,i.forEach(function(t,o){n(r.decodePacket(t,e,!0),o,d)})}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./keys":17,"./utf8":18,after:10,"arraybuffer.slice":11,"base64-arraybuffer":12,blob:13,"has-binary2":19}],17:[function(t,e,r){e.exports=Object.keys||function(t){var e,r=[],n=Object.prototype.hasOwnProperty;for(e in t)n.call(t,e)&&r.push(e);return r}},{}],18:[function(t,e,r){(function(t){!function(n){var o,i,s,a,c,u,p,h="object"==typeof r&&r,f="object"==typeof e&&e&&e.exports==h&&e,l="object"==typeof t&&t;function d(t){for(var e,r,n=[],o=0,i=t.length;o<i;)(e=t.charCodeAt(o++))>=55296&&e<=56319&&o<i?56320==(64512&(r=t.charCodeAt(o++)))?n.push(((1023&e)<<10)+(1023&r)+65536):(n.push(e),o--):n.push(e);return n}function y(t,e){if(t>=55296&&t<=57343){if(e)throw Error("Lone surrogate U+"+t.toString(16).toUpperCase()+" is not a scalar value");return!1}return!0}function m(t,e){return o(t>>e&63|128)}function g(t,e){if(0==(4294967168&t))return o(t);var r="";return 0==(4294965248&t)?r=o(t>>6&31|192):0==(4294901760&t)?(y(t,e)||(t=65533),r=o(t>>12&15|224),r+=m(t,6)):0==(4292870144&t)&&(r=o(t>>18&7|240),r+=m(t,12),r+=m(t,6)),r+=o(63&t|128)}function v(){if(a>=s)throw Error("Invalid byte index");var t=255&i[a];if(a++,128==(192&t))return 63&t;throw Error("Invalid continuation byte")}function w(t){var e,r,n,o,c;if(a>s)throw Error("Invalid byte index");if(a==s)return!1;if(e=255&i[a],a++,0==(128&e))return e;if(192==(224&e)){if(r=v(),(c=(31&e)<<6|r)>=128)return c;throw Error("Invalid continuation byte")}if(224==(240&e)){if(r=v(),n=v(),(c=(15&e)<<12|r<<6|n)>=2048)return y(c,t)?c:65533;throw Error("Invalid continuation byte")}if(240==(248&e)&&(r=v(),n=v(),o=v(),(c=(7&e)<<18|r<<12|n<<6|o)>=65536&&c<=1114111))return c;throw Error("Invalid UTF-8 detected")}if(l.global!==l&&l.window!==l||(n=l),o=String.fromCharCode,c={version:"2.1.2",encode:function(t,e){for(var r,n=!1!==(e=e||{}).strict,o=d(t),i=o.length,s=-1,a="";++s<i;)r=o[s],a+=g(r,n);return a},decode:function(t,e){var r,n,c=!1!==(e=e||{}).strict;for(i=d(t),s=i.length,a=0,r=[];!1!==(n=w(c));)r.push(n);return function(t){for(var e,r=t.length,n=-1,i="";++n<r;)(e=t[n])>65535&&(i+=o((e-=65536)>>>10&1023|55296),e=56320|1023&e),i+=o(e);return i}(r)}},h&&!h.nodeType)if(f)f.exports=c;else for(p in u={}.hasOwnProperty,c)u.call(c,p)&&(h[p]=c[p]);else n.utf8=c}(this)}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],19:[function(t,e,r){(function(r){var n=t("isarray");e.exports=function t(e){var o,i,s;if(!e||"object"!=typeof e)return!1;if(n(e)){for(o=0,i=e.length;o<i;o++)if(t(e[o]))return!0;return!1}if("function"==typeof r.Buffer&&r.Buffer.isBuffer&&r.Buffer.isBuffer(e)||"function"==typeof r.ArrayBuffer&&e instanceof ArrayBuffer||"function"==typeof r.Blob&&e instanceof Blob||"function"==typeof r.File&&e instanceof File)return!0;if(e.toJSON&&"function"==typeof e.toJSON&&1===arguments.length)return t(e.toJSON(),!0);for(s in e)if(Object.prototype.hasOwnProperty.call(e,s)&&t(e[s]))return!0;return!1}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{isarray:22}],20:[function(t,e,r){try{e.exports="undefined"!=typeof XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}catch(t){e.exports=!1}},{}],21:[function(t,e,r){var n=[].indexOf;e.exports=function(t,e){if(n)return t.indexOf(e);for(var r=0;r<t.length;++r)if(t[r]===e)return r;return-1}},{}],22:[function(t,e,r){var n={}.toString;e.exports=Array.isArray||function(t){return"[object Array]"==n.call(t)}},{}],23:[function(t,e,r){(function(t){var r=/^[\],:{}\s]*$/,n=/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,o=/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,i=/(?:^|:|,)(?:\s*\[)+/g,s=/^\s+/,a=/\s+$/;e.exports=function(e){return"string"==typeof e&&e?(e=e.replace(s,"").replace(a,""),t.JSON&&JSON.parse?JSON.parse(e):r.test(e.replace(n,"@").replace(o,"]").replace(i,""))?new Function("return "+e)():void 0):null}}).call(this,"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],24:[function(t,e,r){r.encode=function(t){var e,r="";for(e in t)t.hasOwnProperty(e)&&(r.length&&(r+="&"),r+=encodeURIComponent(e)+"="+encodeURIComponent(t[e]));return r},r.decode=function(t){var e,r,n,o={},i=t.split("&");for(e=0,r=i.length;e<r;e++)n=i[e].split("="),o[decodeURIComponent(n[0])]=decodeURIComponent(n[1]);return o}},{}],25:[function(t,e,r){var n=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,o=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];e.exports=function(t){var e,r,i,s=t,a=t.indexOf("["),c=t.indexOf("]");for(-1!=a&&-1!=c&&(t=t.substring(0,a)+t.substring(a,c).replace(/:/g,";")+t.substring(c,t.length)),e=n.exec(t||""),r={},i=14;i--;)r[o[i]]=e[i]||"";return-1!=a&&-1!=c&&(r.source=s,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r}},{}],26:[function(t,e,r){"use strict";var n,o="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),i=64,s={},a=0,c=0;function u(t){var e="";do{e=o[t%i]+e,t=Math.floor(t/i)}while(t>0);return e}function p(){var t=u(+new Date);return t!==n?(a=0,n=t):t+"."+u(a++)}for(;c<i;c++)s[o[c]]=c;p.encode=u,p.decode=function(t){var e=0;for(c=0;c<t.length;c++)e=e*i+s[t.charAt(c)];return e},e.exports=p},{}],27:[function(t,e,r){e.exports=t("./lib/index")},{"./lib/index":1}]},{},[27])(27)}]);